##### Ctr Shift F5 to reload configs #####
#    _  By    _ Theo _       _       _  _
#   | |__    (_)    | |_    | |_    | || |
#   | / /    | |    |  _|   |  _|    \_, |
#   |_\_\   _|_|_   _\__|   _\__|   _|__/
# _|"""""|_|"""""|_|"""""|_|"""""|_| """"|
# "`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'
# https://sw.kovidgoyal.net/kitty/conf/
##########################################

# {{{ Fonts
font_family      ComicCodeLigatures Nerd Font
#font_family      FantasqueSansM Nerd Font
#font_family      ProggyClean Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size 12
#font_size 16
disable_ligatures cursor
# }}}

# {{{ Text cursor customization
cursor_shape block
# animation only follows cursors that have stayed in their position for longer than the specified number of milliseconds
#cursor_trail 10
#cursor_trail_decay 0.1 0.2
# cursor_trail_color #81a1c1
# }}}

# {{{ Scrollback
scrollback_lines 10000
scrollbar scrolled
scrollbar_interactive yes
scrollbar_jump_on_click no

# 0. Kitty will write the current terminal buffer to Neovim upon calling pager
# 1. write!: overwrite the current buffer to the tmp file
# 2. | in Vim command line is like ; in shell. Everything after `term` are shell commands (write and term are the only Vim commands)
# 3. term cat ...: Open a new terminal and cat the tmp
# 4. sleep 1000: avoid printing the Neovim terminal exit code by forcing it to wait after it loads the cat content
# -: read from stdin (not necessary as Kitty handles it)
scrollback_pager nvim -u NONE
  \ -c "set noswapfile"
  \ -c "set noautoread"
  \ -c "set scrollback=10000"
  \ -c "write! ~/.local/state/kitty-scrollback-buffer | term cat ~/.local/state/kitty-scrollback-buffer; sleep 100"
  \ -c "set clipboard+=unnamedplus"
  \ -c "xnoremap <SPACE>y \"+y"
  \ -c "tnoremap <ESC> <C-\\><C-n>"
  \ -c "nnoremap i <NOP>"
  \ -c "nnoremap q :qa!<CR>"
  \ -c "normal +G"
  \ -

# }}}

# {{{ Mouse
show_hyperlink_targets yes
# }}}

# {{{ Mouse actions
# }}}

# {{{ Performance tuning
# }}}

# {{{ Terminal bell
enable_audio_bell no
visual_bell_duration 0.0
bell_on_tab "[BELL]"
# }}}

# {{{ Window layout
# Fat -- One (or optionally more) windows are shown full width on the top, the rest of the windows are shown side-by-side on the bottom
# |-----------------|
# |                 |
# |-----------------|
# |  |   |   |   |  |
# |-----------------|
# Grid -- All windows are shown in a grid
# |-----------------|
# |        |        |
# |-----------------|
# |        |        |
# |-----------------|
# Horizontal -- All windows are shown side-by-side
# |-----------------|
# |  |   |   |   |  |
# |  |   |   |   |  |
# |  |   |   |   |  |
# |-----------------|
# Splits -- Windows arranged in arbitrary patterns created using horizontal and vertical splits
# |-----------------|
# |        |   | || |
# |        |   | || |
# |        |   | || |
# |-----------------|
# Stack -- Only a single maximized window is shown at a time
# |-----------------|
# |                 |
# |                 |
# |                 |
# |-----------------|
# Tall -- One (or optionally more) windows are shown full height on the left, the rest of the windows are shown one below the other on the right
# |-----------------|
# |        |--------|
# |        |--------|
# |        |--------|
# |-----------------|
# Vertical -- All windows are shown one below the other
# |-----------------|
# |-----------------|
# |-----------------|
# |-----------------|
# |-----------------|
enabled_layouts tall,vertical,horizontal,stack
window_border_width 1.0pt
# Slightly less margin in the bottom for Tmux
# Top Right Bottom Left
window_margin_width 5 5 3 5
inactive_text_alpha 0.6
# macOS only -- in Linux it seems to be treated as "no"
hide_window_decorations titlebar-only
# }}}

# {{{ Tab bar
tab_bar_edge bottom
tab_bar_style custom
# I call draw_tab_with_powerline in my tab_bar.py
# So this option is still passed in tab_bar.py
tab_powerline_style round
tab_bar_align center
tab_bar_min_tabs 1
tab_separator " "
tab_title_max_length 0
# They are redefined in tab_bar.py
#tab_title_template ""
#active_tab_title_template ""
# }}}

# {{{ Color scheme
background_opacity 0.90
# Do not go past 64
background_blur 30
# C-S-a > m/l
dynamic_background_opacity yes
#background_image /path
# Scaled to preserve the OG image
background_image_layout tiled
# }}}

# {{{ The color table - Gruvbox, contrast boosted
# black
# color0  #000000
# color8  #767676
# red
# color1  #cc0403
# color9  #f2201f
# green
# color2  #19cb00
# color10 #23fd00
# yellow
# color3   #cecb00
# color11  #fffd00
# blue
# color4  #0d73cc
# color12 #1a8fff
# magenta
# color5   #cb1ed1
# color13  #fd28ff
# cyan
# color6   #0dcdcd
# color14  #14ffff
# white
# color7   #dddddd
# color15  #ffffff
# }}}

# {{{ Advanced
shell /usr/bin/fish
shell_integration no-cursor
term xterm-kitty
# }}}

# {{{ OS specific tweaks
macos_option_as_alt yes
# }}}

# {{{ Keyboard shortcuts
# Kitty mod has to be modifiers not key
# cannot do: kitty_mod ctrl+a
kitty_mod ctrl+shift
clear_all_shortcuts yes

map ctrl+a>ctrl+a send_text all \x01
# }}}

# {{{ Clipboard
map ctrl+shift+c copy_to_clipboard
map cmd+c copy_or_noop
map ctrl+shift+v paste_from_clipboard
map cmd+v paste_from_clipboard
# }}}

# {{{ Scrolling
#map ctrl+shift+z scroll_to_prompt 0
map ctrl+a>up scroll_to_prompt -1
#map ctrl+shift+x scroll_to_prompt 1
map ctrl+a>down scroll_to_prompt 1
map ctrl+shift+h show_scrollback
map ctrl+a>[ show_scrollback
map ctrl+shift+g show_last_command_output

# }}

# {{{ Window management
map ctrl+shift+enter new_window
map cmd+enter new_window
map ctrl+a>enter launch --location=hsplit --cwd=current

map ctrl+shift+n new_os_window
map cmd+n new_os_window

map ctrl+shift+w close_window
map ctrl+a>x close_window

map ctrl+a>h previous_window
map ctrl+a>j previous_window
map ctrl+a>p previous_window

map ctrl+a>k next_window
map ctrl+a>l next_window
map ctrl+a>n next_window

map ctrl+a>shift+h move_window_backward
map ctrl+a>shift+j move_window_backward
map ctrl+a>shift+p move_window_backward

map ctrl+a>shift+k move_window_forward
map ctrl+a>shift+l move_window_forward
map ctrl+a>shift+n move_window_forward

map ctrl+a>shift+t move_window_to_top

map ctrl+a>r start_resizing_window

# Like "Display Pane Numbers" in Tmux
# Recommended to use over hjkl
map ctrl+a>q focus_visible_window
map ctrl+a>shift+q swap_with_window
# }}}

# {{{ Tab management
map ctrl+shift+t new_tab
map cmd+t new_tab
map ctrl+a>c launch --cwd=current --type=tab

map cmd+w close_tab
map shift+cmd+w close_os_window

map ctrl+shift+. move_tab_forward
map ctrl+shift+, move_tab_backward

map ctrl+shift+alt+t set_tab_title
map shift+cmd+i set_tab_title
map ctrl+a>, set_tab_title

map ctrl+a>1 goto_tab 1
map ctrl+a>2 goto_tab 2
map ctrl+a>3 goto_tab 3
map ctrl+a>4 goto_tab 4
map ctrl+a>5 goto_tab 5
map ctrl+a>6 goto_tab 6
map ctrl+a>7 goto_tab 7
map ctrl+a>8 goto_tab 8
map ctrl+a>9 goto_tab 9
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
# }}}

# {{{ Layout management
map ctrl+shift+l next_layout
map ctrl+a>o next_layout

map ctrl+alt+p last_used_layout
map ctrl+a>shift+o next_layout

map ctrl+a>z toggle_layout stack
# }}}

# {{{ Font sizes
map ctrl+shift+equal change_font_size all +3.0
map ctrl+shift+plus change_font_size all +2.0
map cmd+plus change_font_size all +2.0
map cmd+equal change_font_size all +2.0
map ctrl+shift+minus change_font_size all -2.0
map cmd+minus change_font_size all -1.0
map ctrl+shift+0 change_font_size all 0
map cmd+0 change_font_size all 0
# }}}

# {{{ Select and act on visible text
map ctrl+shift+e open_url_with_hints
map ctrl+shift+p>shift+f kitten hints --type path
# }}}

# {{{ Miscellaneous
map cmd+` macos_cycle_through_os_windows
map cmd+shift+` macos_cycle_through_os_windows_backwards

map ctrl+a>: kitty_shell window

map ctrl+shift+a>m set_background_opacity +0.1
map ctrl+shift+a>l set_background_opacity -0.1

map ctrl+shift+delete clear_terminal reset active
map ctrl+shift+k clear_terminal scrollback active
map option+cmd+k clear_terminal scrollback active

map ctrl+shift+f5 load_config_file
map ctrl+cmd+, load_config_file

map cmd+h hide_macos_app
map cmd+m minimize_macos_window
# }}}


# BEGIN_KITTY_THEME
# If you use the interactive mode, it modifies the config
# Instead, use:
#  kitten themes --dump-theme name-of-the-theme >> ~/.config/kitty/current-theme.conf
include current-theme.conf
# END_KITTY_THEME
